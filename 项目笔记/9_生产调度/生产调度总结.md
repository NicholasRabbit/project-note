#### 1，Pig框架权限bug: 

原因：顶级部门下新增用户，保存时不保存comp_id(生产调度项目自定义字段)，导致用户登陆后查询报错

 解决：手动在数据库增加所属部门的comp_id(临时方案)，然后清空下缓存，清除旧的登录数据。

![1687245168365](note-images/1687245168365.png)

![1690770762033](note-images/1690770762033.png)



#### 2，海康摄像头实时监控

  ```java
public classs VidePreView{
	//这里的lPlay就是lRealHandle
    lPlay = hCNetSDK.NET_DVR_RealPlay_V40(userID, strClientInfo, fRealDataCallBack , null);    
}
  ```

目前已经获取海康的实时视频流，需要解决转码并传送给前端的问题。

VideoView.java

```java
//设置链接方式，确定视频格式？？
strClientInfo.dwLinkMode=0; //连接方式：0- TCP方式，1- UDP方式，2- 多播方式，3- RTP方式，4- RTP/RTSP，5- RTP/HTTP，6- HRUDP（可靠传输） ，7- RTSP/HTTPS，8- NPQ
```

几个id的含义：

lUserID ： 登录摄像头后返回的值，登录用户的id

lRealHandle: 当前的预览句柄，NET_DVR_RealPlay_V40的返回值 

